<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"/>
<title>Carry Nest | Official Store</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
:root { --gold: #ffb703; --bg: #030712; --card: #0f0f0f; --red: #ff3131; --green: #25D366; --blue: #2874f0; }
body { margin: 0; font-family: 'Outfit', sans-serif; background: var(--bg); color: #fff; padding-bottom: 80px; overflow-x: hidden; }

/* INTRO ANIMATION CSS */
#intro-screen {
    position: fixed; inset: 0; background: var(--bg); z-index: 10000;
    display: flex; align-items: center; justify-content: center; flex-direction: column;
}
.intro-text { font-size: 40px; font-weight: 900; color: var(--gold); text-transform: uppercase; letter-spacing: 4px; }
.word { opacity: 0; display: inline-block; transform: translateY(20px); transition: all 0.5s ease; }
.word.show { opacity: 1; transform: translateY(0); }
.move-up { animation: moveToHeader 0.8s forwards ease-in-out; }
@keyframes moveToHeader {
    to { transform: translateY(-45vh) scale(0.5); opacity: 0; }
}

header { background: rgba(19, 25, 33, 0.95); padding: 15px; border-bottom: 1px solid rgba(255,183,3,0.3); position: sticky; top: 0; z-index: 1000; text-align: center; }
.logo-text { font-weight: 900; color: var(--gold); font-size: 22px; letter-spacing: 2px; text-transform: uppercase; margin: 0; }

.container { padding: 10px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.p-card { background: var(--card); border-radius: 15px; overflow: hidden; border: 1px solid #222; }

.btn-main { width: 100%; padding: 16px; background: var(--green); color: #fff; border: none; border-radius: 12px; font-weight: 900; cursor: pointer; }
.nav-bar { position: fixed; bottom: 0; width: 100%; background: #0f172a; display: flex; justify-content: space-around; padding: 12px 0; border-top: 1px solid #333; z-index: 2000; }
</style>
</head>
<body>

<div id="intro-screen">
    <div class="intro-text"><span class="word" id="w1">Carry</span> <span class="word" id="w2">Nest</span></div>
</div>

<header id="main-header" style="opacity:0;">
    <div class="logo-text">Carry Nest</div>
</header>

<div id="home-view">
    <div id="grid" class="container"></div>
</div>

<div id="account-view" style="display:none; padding:20px;">
    <div style="background: #111; padding: 20px; border-radius: 15px; border: 1px solid #222;">
        <h3 style="color:var(--gold);">Verify Account</h3>
        <input type="tel" id="track-phone" placeholder="WhatsApp Number" style="width:100%; padding:12px; margin-bottom:10px; background:#000; border:1px solid #333; color:#fff; border-radius:10px;">
        <button onclick="verifyUser()" id="find-btn" class="btn-main">GET OTP</button>
        <div id="recaptcha-container"></div>
    </div>
</div>

<div class="nav-bar">
    <div onclick="switchTab('home')">Home</div>
    <div onclick="switchTab('account')">Account</div>
</div>

<script>
window.addEventListener('DOMContentLoaded', () => {
    setTimeout(() => { document.getElementById('w1').classList.add('show'); }, 500);
    setTimeout(() => { document.getElementById('w2').classList.add('show'); }, 1000);
    setTimeout(() => { document.getElementById('intro-screen').classList.add('move-up'); }, 2000);
    setTimeout(() => { document.getElementById('intro-screen').style.display = 'none'; document.getElementById('main-header').style.opacity = '1'; }, 2800);
});
function switchTab(t) {
    document.getElementById('home-view').style.display = t==='home'?'block':'none';
    document.getElementById('account-view').style.display = t==='account'?'block':'none';
}
</script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getAuth, RecaptchaVerifier, signInWithPhoneNumber } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";

const firebaseConfig = { 
    apiKey: "AIzaSyDijunsZZH2NuutbuzGoMOvG3hD8nrliwY", 
    authDomain: "carry-nest-admin.firebaseapp.com", 
    projectId: "carry-nest-admin" 
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

window.verifyUser = async () => {
    const phoneInput = document.getElementById('track-phone').value;
    const fullPhone = phoneInput.startsWith('+91') ? phoneInput : '+91' + phoneInput;

    if(!window.recaptchaVerifier) {
        window.recaptchaVerifier = new RecaptchaVerifier(auth, 'recaptcha-container', { 'size': 'invisible' });
    }

    signInWithPhoneNumber(auth, fullPhone, window.recaptchaVerifier)
    .then((confirmationResult) => {
        const code = prompt("Enter 6-digit OTP:");
        if(code) {
            confirmationResult.confirm(code).then(() => {
                alert("Verified!");
                localStorage.setItem('cn_verified_phone', phoneInput);
            }).catch(() => alert("Invalid OTP"));
        }
    }).catch((error) => {
        console.error(error);
        alert("OTP ravatledhu! Firebase lo Authorized Domains lo mee GitHub link add cheshara?");
    });
};
</script>
</body>
</html>
